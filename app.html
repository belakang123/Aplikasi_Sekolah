<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Aplikasi Sekolah - Absensi, Daftar Siswa, Jadwal Pelajaran, Monitoring Hafalan</title>
  <style>
    /* Reset and base */
    * {
      box-sizing: border-box;
    }
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #f5f7fa;
      color: #333;
      display: flex;
      height: 100vh;
      overflow: hidden;
    }
    /* Sidebar */
    .sidebar {
      width: 280px;
      background: linear-gradient(135deg, #4a90e2, #357ABD);
      color: white;
      display: flex;
      flex-direction: column;
      padding: 20px;
      box-shadow: 2px 0 8px rgba(0,0,0,0.15);
    }
    .sidebar h1 {
      font-weight: 700;
      font-size: 1.8rem;
      margin-bottom: 40px;
      user-select: none;
    }
    .nav-item {
      padding: 15px 20px;
      margin-bottom: 10px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      font-size: 1.1rem;
      transition: background 0.3s ease;
      user-select: none;
      display: flex;
      align-items: center;
      gap: 12px;
    }
    .nav-item:hover, .nav-item.active {
      background: rgba(255,255,255,0.25);
      box-shadow: 0 0 10px rgba(255,255,255,0.3);
    }
    .nav-item svg {
      width: 20px;
      height: 20px;
      fill: white;
    }
    /* Main content */
    .main-content {
      flex: 1;
      background: white;
      padding: 30px 40px;
      overflow-y: auto;
      box-shadow: inset 0 0 15px rgba(0,0,0,0.05);
      display: flex;
      flex-direction: column;
    }
    h2 {
      margin-top: 0;
      font-weight: 700;
      color: #222;
      margin-bottom: 20px;
      user-select: none;
    }
    /* Common styles for tables */
    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 20px;
      font-size: 0.95rem;
    }
    th, td {
      padding: 12px 15px;
      border-bottom: 1px solid #ddd;
      text-align: left;
    }
    th {
      background: #357ABD;
      color: white;
      user-select: none;
    }
    tr:hover {
      background: #f0f8ff;
    }
    /* Buttons */
    button {
      background: #357ABD;
      color: white;
      border: none;
      padding: 10px 18px;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 600;
      transition: background 0.3s ease;
      user-select: none;
    }
    button:hover {
      background: #2a5d9f;
    }
    /* Form inputs */
    input[type="text"], input[type="number"], select {
      padding: 8px 12px;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 1rem;
      width: 100%;
      margin-bottom: 15px;
      transition: border-color 0.3s ease;
    }
    input[type="text"]:focus, input[type="number"]:focus, select:focus {
      border-color: #357ABD;
      outline: none;
    }
    label {
      font-weight: 600;
      margin-bottom: 6px;
      display: block;
      user-select: none;
    }
    /* Flex row for forms */
    .form-row {
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
    }
    .form-group {
      flex: 1 1 200px;
      min-width: 200px;
    }
    /* Attendance */
    .attendance-list {
      max-height: 400px;
      overflow-y: auto;
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 10px;
      background: #fafafa;
    }
    .attendance-list label {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 6px 0;
      cursor: pointer;
      user-select: none;
    }
    /* Schedule */
    .schedule-table th, .schedule-table td {
      text-align: center;
    }
    /* Monitoring Hafalan */
    .monitoring-list {
      max-height: 400px;
      overflow-y: auto;
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 10px;
      background: #fafafa;
    }
    .monitoring-list label {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 6px 0;
      user-select: none;
    }
    .progress-bar {
      height: 14px;
      background: #ddd;
      border-radius: 8px;
      overflow: hidden;
      flex: 1;
      margin-left: 15px;
      box-shadow: inset 0 1px 2px rgba(255,255,255,0.7);
    }
    .progress-bar-fill {
      height: 100%;
      background: #4a90e2;
      border-radius: 8px 0 0 8px;
      transition: width 0.4s ease;
    }
    /* Scrollbar styling */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }
    ::-webkit-scrollbar-track {
      background: #f1f1f1;
      border-radius: 8px;
    }
    ::-webkit-scrollbar-thumb {
      background: #357ABD;
      border-radius: 8px;
    }
    /* Responsive */
    @media (max-width: 900px) {
      body {
        flex-direction: column;
      }
      .sidebar {
        width: 100%;
        flex-direction: row;
        overflow-x: auto;
        padding: 10px 5px;
      }
      .nav-item {
        flex: 1 0 auto;
        margin: 0 5px;
        text-align: center;
        font-size: 0.9rem;
        padding: 10px 5px;
      }
      .main-content {
        padding: 20px 15px;
        height: calc(100vh - 60px);
      }
    }
  </style>
</head>
<body>
  <nav class="sidebar" role="navigation" aria-label="Main navigation">
    <h1>Aplikasi Sekolah</h1>
    <div class="nav-item active" data-tab="absensi" tabindex="0" role="button" aria-pressed="true" aria-label="Absensi">
      <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
      Absensi
    </div>
    <div class="nav-item" data-tab="daftar-siswa" tabindex="0" role="button" aria-pressed="false" aria-label="Daftar Siswa">
      <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M19 3H5c-1.1 0-2 .9-2 2v14a2 2 0 002 2h14a2 2 0 002-2V5c0-1.1-.9-2-2-2zm-7 14h-2v-2h2v2zm0-4h-2V7h-2v6z"/></svg>
      Daftar Siswa
    </div>
    <div class="nav-item" data-tab="jadwal-pelajaran" tabindex="0" role="button" aria-pressed="false" aria-label="Jadwal Pelajaran">
      <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M7 10h5v5H7zM19 3h-1V1h-2v2H8V1H6v2H5c-1.1 0-2 .9-2 2v14a2 2 0 002 2h14a2 2 0 002-2V5c0-1.1-.9-2-2-2z"/></svg>
      Jadwal Pelajaran
    </div>
    <div class="nav-item" data-tab="monitoring-hafalan" tabindex="0" role="button" aria-pressed="false" aria-label="Monitoring Hafalan">
      <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 2a10 10 0 1010 10A10 10 0 0012 2zm1 15h-2v-6h2zm0-8h-2V7h2z"/></svg>
      Monitoring Hafalan
    </div>
  </nav>
  <main class="main-content" role="main">
    <!-- Absensi Tab -->
    <section id="absensi" class="tab-content" aria-label="Absensi" tabindex="0">
      <h2>Absensi Siswa</h2>
      <div class="attendance-list" aria-live="polite" aria-relevant="additions removals">
        <!-- Attendance checkboxes will be generated here -->
      </div>
      <button id="save-attendance">Simpan Absensi</button>
    </section>
    <!-- Daftar Siswa Tab -->
    <section id="daftar-siswa" class="tab-content" aria-label="Daftar Siswa" tabindex="0" hidden>
      <h2>Daftar Siswa</h2>
      <table aria-describedby="daftar-siswa-desc">
        <caption id="daftar-siswa-desc" class="sr-only">Tabel daftar siswa</caption>
        <thead>
          <tr>
            <th>Nama</th>
            <th>Kelas</th>
            <th>Umur</th>
          </tr>
        </thead>
        <tbody id="student-list">
          <!-- Student rows will be generated here -->
        </tbody>
      </table>
      <h3>Tambah Siswa Baru</h3>
      <form id="add-student-form" aria-label="Form tambah siswa baru">
        <div class="form-row">
          <div class="form-group">
            <label for="student-name">Nama</label>
            <input type="text" id="student-name" name="student-name" required />
          </div>
          <div class="form-group">
            <label for="student-class">Kelas</label>
            <input type="text" id="student-class" name="student-class" required />
          </div>
          <div class="form-group">
            <label for="student-age">Umur</label>
            <input type="number" id="student-age" name="student-age" min="5" max="25" required />
          </div>
        </div>
        <button type="submit">Tambah Siswa</button>
      </form>
    </section>
    <!-- Jadwal Pelajaran Tab -->
    <section id="jadwal-pelajaran" class="tab-content" aria-label="Jadwal Pelajaran" tabindex="0" hidden>
      <h2>Jadwal Pelajaran</h2>
      <form id="add-schedule-form" style="margin-bottom:18px; display:flex; gap:10px; flex-wrap:wrap; align-items:center;">
        <input type="text" id="input-jam" placeholder="Jam" required style="padding:8px 12px; border-radius:6px; border:1px solid #ccc; font-size:15px; width:90px;" />
        <select id="input-hari" required style="padding:8px 12px; border-radius:6px; border:1px solid #ccc; font-size:15px;">
          <option value="Monday">Senin</option>
          <option value="Tuesday">Selasa</option>
          <option value="Wednesday">Rabu</option>
          <option value="Thursday">Kamis</option>
          <option value="Friday">Jumat</option>
        </select>
        <input type="text" id="input-mapel" placeholder="Mata Pelajaran" required style="padding:8px 12px; border-radius:6px; border:1px solid #ccc; font-size:15px; width:140px;" />
        <button type="submit">Tambah Jadwal</button>
      </form>
      <table class="schedule-table" aria-describedby="jadwal-pelajaran-desc">
        <caption id="jadwal-pelajaran-desc" class="sr-only">Tabel jadwal pelajaran mingguan</caption>
        <thead>
          <tr>
            <th>Jam</th>
            <th>Senin</th>
            <th>Selasa</th>
            <th>Rabu</th>
            <th>Kamis</th>
            <th>Jumat</th>
          </tr>
        </thead>
        <tbody id="schedule-body">
          <!-- Schedule rows will be generated here -->
        </tbody>
      </table>
    </section>
    <!-- Monitoring Hafalan Tab -->
    <section id="monitoring-hafalan" class="tab-content" aria-label="Monitoring Hafalan" tabindex="0" hidden>
      <h2>Monitoring Hafalan Siswa</h2>
      <div style="overflow-x:auto;" class="monitoring-list" aria-live="polite" aria-relevant="additions removals" id="monitoring-list">
        <!-- Monitoring list will be generated here -->
      </div>
    </section>
  </main>
  <script>
    // Data storage
    const students = [
      { id: 1, name: "Ahmad Fauzi", class: "7A", age: 13 },
      { id: 2, name: "Siti Nurhaliza", class: "7B", age: 14 },
      { id: 3, name: "Budi Santoso", class: "8A", age: 14 },
      { id: 4, name: "Dewi Lestari", class: "8B", age: 15 }
    ];
    const months = [
      "Januari", "Februari", "Maret", "April", "Mei", "Juni",
      "Juli", "Agustus", "September", "Oktober", "November", "Desember"
    ];
    let attendance = JSON.parse(localStorage.getItem('attendanceApp') || '{}'); // { bulan: { studentId: { hari: status } } }
    // Jadwal pelajaran
    let schedule = JSON.parse(localStorage.getItem('scheduleApp') || '[]');
    const hariPerBulan = {
      1: 31, 2: 29, 3: 31, 4: 30, 5: 31, 6: 30, 7: 31, 8: 31, 9: 30, 10: 31, 11: 30, 12: 31
    };
    let hafalanData = JSON.parse(localStorage.getItem('hafalanApp') || '{}'); // { bulan: { studentId: { hari: {baru, murojaah} } } }

    // Navigation tabs
    const navItems = document.querySelectorAll('.nav-item');
    const tabContents = document.querySelectorAll('.tab-content');

    navItems.forEach(item => {
      item.addEventListener('click', () => {
        setActiveTab(item.dataset.tab);
      });
      item.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          setActiveTab(item.dataset.tab);
        }
      });
    });

    function setActiveTab(tabName) {
      navItems.forEach(item => {
        item.classList.toggle('active', item.dataset.tab === tabName);
        item.setAttribute('aria-pressed', item.dataset.tab === tabName ? 'true' : 'false');
      });
      tabContents.forEach(section => {
        section.hidden = section.id !== tabName;
      });
      if (tabName === 'absensi') {
        renderAttendance();
      } else if (tabName === 'daftar-siswa') {
        renderStudentList();
      } else if (tabName === 'jadwal-pelajaran') {
        renderSchedule();
      } else if (tabName === 'monitoring-hafalan') {
        renderMonitoring();
      }
    }

    // Render Absensi
    function renderAttendance() {
      const container = document.querySelector('.attendance-list');
      container.innerHTML = '';
      // Bulan selector
      const bulanDiv = document.createElement('div');
      bulanDiv.style = 'margin-bottom:16px;';
      const bulanLabel = document.createElement('label');
      bulanLabel.textContent = 'Pilih Bulan: ';
      bulanLabel.style = 'font-weight:600; margin-right:8px;';
      const bulanSelect = document.createElement('select');
      bulanSelect.id = 'bulan-absensi-app';
      bulanSelect.style = 'padding:6px 14px; border-radius:8px; font-size:15px;';
      months.forEach((bulan, idx) => {
        const opt = document.createElement('option');
        opt.value = idx+1;
        opt.textContent = bulan;
        bulanSelect.appendChild(opt);
      });
      bulanDiv.appendChild(bulanLabel);
      bulanDiv.appendChild(bulanSelect);
      container.appendChild(bulanDiv);

      // Hari per bulan
      const hariPerBulan = {
        1: 31, 2: 29, 3: 31, 4: 30, 5: 31, 6: 30, 7: 31, 8: 31, 9: 30, 10: 31, 11: 30, 12: 31
      };
      let bulanAktif = parseInt(bulanSelect.value);
      bulanSelect.addEventListener('change', function() {
        bulanAktif = parseInt(this.value);
        renderAbsensiTableApp(bulanAktif);
      });
      renderAbsensiTableApp(bulanAktif);
    }

    function renderAbsensiTableApp(bulanAktif) {
      const container = document.querySelector('.attendance-list');
      while(container.children.length > 1) container.removeChild(container.lastChild);
      const hari = {
        1: 31, 2: 29, 3: 31, 4: 30, 5: 31, 6: 30, 7: 31, 8: 31, 9: 30, 10: 31, 11: 30, 12: 31
      }[bulanAktif];
      const table = document.createElement('table');
      table.className = 'absensi-table';
      const thead = document.createElement('thead');
      const trHead = document.createElement('tr');
      trHead.innerHTML = '<th>Nama Siswa</th>';
      for(let i=1; i<=hari; i++) {
        const th = document.createElement('th');
        th.textContent = i;
        th.style.minWidth = '40px';
        trHead.appendChild(th);
      }
      thead.appendChild(trHead);
      table.appendChild(thead);
      const tbody = document.createElement('tbody');
      students.forEach(student => {
        const tr = document.createElement('tr');
        const tdNama = document.createElement('td');
        tdNama.textContent = student.name;
        tr.appendChild(tdNama);
        for(let h=1; h<=hari; h++) {
          const td = document.createElement('td');
          td.style.textAlign = 'center';
          // Status: Hadir/Izin/Alfa
          const status = attendance[bulanAktif]?.[student.id]?.[h] || '';
          let badge = '';
          if(status === 'Hadir') badge = '<span style="color:#357ABD;font-weight:700;">H</span>';
          else if(status === 'Izin') badge = '<span style="color:#fbc02d;font-weight:700;">I</span>';
          else if(status === 'Alfa') badge = '<span style="color:#d32f2f;font-weight:700;">A</span>';
          else badge = '<span style="color:#bbb;">-</span>';
          td.innerHTML = badge;
          // Dropdown tetap ada untuk edit
          const select = document.createElement('select');
          select.style = 'padding:2px 6px; border-radius:6px; font-size:13px; background:#f0f8ff; margin-top:4px;';
          ['','Hadir','Izin','Alfa'].forEach(opt => {
            const option = document.createElement('option');
            option.value = opt;
            option.textContent = opt || '-';
            if(opt==='Hadir') option.style.color = '#357ABD';
            if(opt==='Izin') option.style.color = '#fbc02d';
            if(opt==='Alfa') option.style.color = '#d32f2f';
            select.appendChild(option);
          });
          select.value = status;
          select.addEventListener('change', function() {
            if(!attendance[bulanAktif]) attendance[bulanAktif] = {};
            if(!attendance[bulanAktif][student.id]) attendance[bulanAktif][student.id] = {};
            attendance[bulanAktif][student.id][h] = select.value;
            localStorage.setItem('attendanceApp', JSON.stringify(attendance));
            renderAbsensiTableApp(bulanAktif); // Refresh to show badge
          });
          td.appendChild(select);
          tr.appendChild(td);
        }
        tbody.appendChild(tr);
      });
      table.appendChild(tbody);
      container.appendChild(table);
    }

    // Save attendance button
    document.getElementById('save-attendance').addEventListener('click', () => {
      localStorage.setItem('attendanceApp', JSON.stringify(attendance));
      alert('Absensi berhasil disimpan!');
    });

    // Render Daftar Siswa
    function renderStudentList() {
      const tbody = document.getElementById('student-list');
      tbody.innerHTML = '';
    students.forEach((student, idx) => {
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${student.name}</td>
        <td>${student.class}</td>
        <td>${student.age}</td>
        <td><button class="btn-hapus-siswa" data-idx="${idx}" style="background:#d32f2f; color:#fff; border:none; border-radius:5px; padding:4px 10px; cursor:pointer;">Hapus</button></td>
      `;
      tbody.appendChild(tr);
    });
    // Event hapus siswa
    tbody.querySelectorAll('.btn-hapus-siswa').forEach(btn => {
      btn.addEventListener('click', function() {
        const idx = parseInt(this.getAttribute('data-idx'));
        students.splice(idx, 1);
        renderStudentList();
        renderSchedule(); // update jadwal jika siswa dihapus
      });
    });
    }

    // Add new student form
    document.getElementById('add-student-form').addEventListener('submit', (e) => {
      e.preventDefault();
      const name = e.target['student-name'].value.trim();
      const kelas = e.target['student-class'].value.trim();
      const age = parseInt(e.target['student-age'].value, 10);
      if (name && kelas && age) {
        const newId = students.length ? students[students.length - 1].id + 1 : 1;
        students.push({ id: newId, name: name, class: kelas, age: age });
        e.target.reset();
        renderStudentList();
        alert('Siswa baru berhasil ditambahkan!');
      }
    });

    // Render Jadwal Pelajaran
    function renderSchedule() {
    const tbody = document.getElementById('schedule-body');
    tbody.innerHTML = '';
    // Buat struktur jadwal mingguan berdasarkan jam
    // Ambil semua jam unik
    const jamList = [...new Set(schedule.map(s => s.time))].sort();
    jamList.forEach(jam => {
      const tr = document.createElement('tr');
      tr.innerHTML = `<td>${jam}</td>`;
      ['Monday','Tuesday','Wednesday','Thursday','Friday'].forEach(hari => {
        const pelajaran = schedule.find(s => s.time === jam && s.day === hari);
        tr.innerHTML += `<td>${pelajaran ? pelajaran.subject : ''}</td>`;
      });
      // Tombol hapus jadwal untuk jam tertentu
      tr.innerHTML += `<td><button class="btn-hapus-jadwal" data-jam="${jam}" style="background:#d32f2f; color:#fff; border:none; border-radius:5px; padding:4px 10px; cursor:pointer;">Hapus</button></td>`;
      tbody.appendChild(tr);
    });
    // Event hapus jadwal
    tbody.querySelectorAll('.btn-hapus-jadwal').forEach(btn => {
      btn.addEventListener('click', function() {
        const jam = this.getAttribute('data-jam');
        schedule = schedule.filter(s => s.time !== jam);
        localStorage.setItem('scheduleApp', JSON.stringify(schedule));
        renderSchedule();
      });
    });
    // Event handler form tambah jadwal pelajaran
    document.getElementById('add-schedule-form').addEventListener('submit', function(e) {
      e.preventDefault();
      const jam = document.getElementById('input-jam').value.trim();
      const hari = document.getElementById('input-hari').value;
      const mapel = document.getElementById('input-mapel').value.trim();
      if(jam && hari && mapel) {
        schedule.push({ time: jam, day: hari, subject: mapel });
        localStorage.setItem('scheduleApp', JSON.stringify(schedule));
        renderSchedule();
        this.reset();
      }
    });
    }

    // Render Monitoring Hafalan
    function renderMonitoring() {
    const container = document.getElementById('monitoring-list');
    container.innerHTML = '';
    // Pilih bulan
    const bulanSelect = document.createElement('select');
    months.forEach((bulan, idx) => {
      const opt = document.createElement('option');
      opt.value = idx+1;
      opt.textContent = bulan;
      bulanSelect.appendChild(opt);
    });
    container.appendChild(bulanSelect);

    bulanSelect.addEventListener('change', function() {
      renderHafalanBulan(parseInt(this.value));
    });
    // Clear invalid localStorage data if needed
    try {
      if (typeof hafalanData !== 'object' || hafalanData === null) {
        localStorage.removeItem('hafalanApp');
        hafalanData = {};
      }
    } catch(e) { hafalanData = {}; }
    renderHafalanBulan(parseInt(bulanSelect.value));
    }

    function renderHafalanBulan(bulanAktif) {
    const container = document.getElementById('monitoring-list');
    while(container.children.length > 1) container.removeChild(container.lastChild);
    const hari = hariPerBulan[bulanAktif];
    // Reset hafalanData if not valid object
    if (typeof hafalanData !== 'object' || hafalanData === null) hafalanData = {};
    if (!hafalanData[bulanAktif] || typeof hafalanData[bulanAktif] !== 'object') hafalanData[bulanAktif] = {};
    const table = document.createElement('table');
    table.className = 'hafalan-table';
    const thead = document.createElement('thead');
    const trHead = document.createElement('tr');
    trHead.innerHTML = `<th>Nama Siswa</th>`;
    for(let i=1; i<=hari; i++) {
      const th = document.createElement('th');
      th.textContent = i;
      th.style.minWidth = '110px';
      trHead.appendChild(th);
    }
    thead.appendChild(trHead);
    table.appendChild(thead);
    const tbody = document.createElement('tbody');
    students.forEach(student => {
      const tr = document.createElement('tr');
      const tdNama = document.createElement('td');
      tdNama.textContent = student.name;
      tr.appendChild(tdNama);
      // Always reset student data for this month
      if (!hafalanData[bulanAktif][student.id] || typeof hafalanData[bulanAktif][student.id] !== 'object') hafalanData[bulanAktif][student.id] = {};
      for(let h=1; h<=hari; h++) {
        if (!hafalanData[bulanAktif][student.id][h] || typeof hafalanData[bulanAktif][student.id][h] !== 'object') hafalanData[bulanAktif][student.id][h] = {baru: '', murojaah: ''};
        const td = document.createElement('td');
        td.style.display = 'flex';
        td.style.flexDirection = 'row';
        td.style.alignItems = 'center';
        td.style.gap = '4px';
        // Input Hafalan Baru
        const inputBaru = document.createElement('input');
        inputBaru.type = 'text';
        inputBaru.placeholder = 'Baru';
        inputBaru.style = 'font-size:13px; width:48px;';
        inputBaru.value = hafalanData[bulanAktif][student.id][h].baru;
        inputBaru.addEventListener('change', function () {
          hafalanData[bulanAktif][student.id][h].baru = inputBaru.value;
          localStorage.setItem('hafalanApp', JSON.stringify(hafalanData));
          renderHafalanBulan(bulanAktif); // force re-render
        });
        // Input Murojaah
        const inputMurojaah = document.createElement('input');
        inputMurojaah.type = 'text';
        inputMurojaah.placeholder = 'Murojaah';
        inputMurojaah.style = 'font-size:13px; width:60px;';
        inputMurojaah.value = hafalanData[bulanAktif][student.id][h].murojaah;
        inputMurojaah.addEventListener('change', function () {
          hafalanData[bulanAktif][student.id][h].murojaah = inputMurojaah.value;
          localStorage.setItem('hafalanApp', JSON.stringify(hafalanData));
          renderHafalanBulan(bulanAktif); // force re-render
        });
        td.appendChild(inputBaru);
        td.appendChild(inputMurojaah);
        tr.appendChild(td);
      }
      tbody.appendChild(tr);
    });
    table.appendChild(tbody);
    container.appendChild(table);
    }

    // Initialize default tab
    setActiveTab('absensi');
  </script>
</body>
</html>
